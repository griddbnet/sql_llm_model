(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3951:function(e,t,s){Promise.resolve().then(s.bind(s,4096))},4096:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(7437),l=s(2265),a=s(9343),o=s(5023),r=e=>{let{queryResults:t}=e,s=[];for(let e=0;e<t[0].length;e++){let t={accessorKey:"col-#-".concat(e),header:"col-#-".concat(e)};s.push(t)}let a=(0,l.useMemo)(()=>s,[t,s]),r=(0,l.useMemo)(()=>{let e=Array(t.length);return t.forEach((t,s)=>{let n={};t.forEach((e,t)=>{n["col-#-".concat(t)]=e.toString()}),e[s]=n}),e},[t]),i=(0,o.X0)({columns:a,data:r,enableKeyboardShortcuts:!1,enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,mrtTheme:e=>({baseBackgroundColor:e.palette.background.default}),muiTableBodyRowProps:{hover:!1},muiTableProps:{sx:{border:"1px solid rgba(81, 81, 81, .5)",caption:{captionSide:"top"}}},muiTableHeadCellProps:{sx:{border:"1px solid rgba(81, 81, 81, .5)",fontStyle:"italic",fontWeight:"normal"}},muiTableBodyCellProps:{sx:{border:"1px solid rgba(81, 81, 81, .5)"}},renderCaption:e=>{let{table:t}=e;return"Here is a table rendered with the lighter weight MRT_Table sub-component, rendering ".concat(t.getRowModel().rows.length," rows.")}});return(0,n.jsx)(o.HB,{table:i})};let i=[{num:1,question:"Show all people older than 30",context:"CREATE TABLE head (name VARCHAR, born_state VARCHAR, age VARCHAR)"},{num:2,context:"CREATE TABLE IF NOT EXISTS devices (device_id INTEGER, ts TIMESTAMP, co DOUBLE, humidity DOUBLE,light BOOL,lpg DOUBLE,motion BOOL,smoke DOUBLE,temp DOUBLE);",question:"What is the average lpg ?"},{num:3,context:"CREATE TABLE IF NOT EXISTS iot_meter_foo (meter_id INTEGER, ts TIMESTAMP, kwh DOUBLE, temp DOUBLE, aqi DOUBLE); CREATE TABLE IF NOT EXISTS iot_meter_bar (meter_id INTEGER, ts TIMESTAMP, kwh DOUBLE, temp DOUBLE, aqi DOUBLE); CREATE TABLE IF NOT EXISTS iot_meter_baz (meter_id INTEGER, ts TIMESTAMP, kwh DOUBLE, temp DOUBLE, aqi DOUBLE);",question:"When is the highest aqi for all meters at location baz?"},{num:4,context:"CREATE TABLE IF NOT EXISTS bill_records (billing_date TIMESTAMP, location STRING, total_kwh DOUBLE, amount DOUBLE, daily_kwh DOUBLE);",question:"What is the highest total_kwh in 2020 for all bill_records?"}];function c(){let[e,t]=l.useState(""),[s,o]=l.useState(!1),[c,d]=l.useState([]),{register:m,handleSubmit:h,formState:{errors:E}}=(0,a.cI)(),u=async()=>{fetch("".concat("/nlquery","?"),{method:"GET",mode:"no-cors",cache:"no-cache"}).then(e=>e.json()).then(e=>{console.log("raw results: ",e),d(e)})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{className:"p-2 absolute left-0 top-24 bg-gray-400 rounded-r-lg  bg-gray-300 cursor-pointer text-align-center",style:{display:s?"none":"block"},onClick:()=>o(!s),children:[(0,n.jsx)("span",{className:"text-slate-900",children:" Show "}),(0,n.jsx)("br",{}),"  ",(0,n.jsx)("span",{className:"text-slate-900",children:" Examples"})]}),(0,n.jsx)("div",{className:"absolute left-0 top-24 bg-gray-400 max-w-96 rounded-sm z-20",style:{display:s?"block":"none"},children:(0,n.jsxs)("div",{className:"m-5",children:[(0,n.jsx)("button",{className:"absolute top-0 right-0 m-1 px-2 py-1 border border-gray-600 cursor-pointer bg-gray-500",onClick:()=>o(!s),children:"X"}),(0,n.jsx)("span",{className:"text-2xl text-slate-900",children:" Examples "}),(0,n.jsx)("ol",{className:"text-md text-slate-800",children:i.map(e=>(0,n.jsxs)("div",{className:"mx-2 my-6 border border-dotted",children:[(0,n.jsxs)("li",{className:"m-2",children:[(0,n.jsx)("span",{className:"underline",children:"context:"})," ",(0,n.jsxs)("span",{className:"font-semibold",children:[" ",e.context," "]})]}),(0,n.jsxs)("li",{className:"m-2",children:[(0,n.jsx)("span",{className:"underline",children:"question:"}),"  ",(0,n.jsxs)("span",{className:"font-semibold",children:[" ",e.question," "]})]})]},e.num))})]})}),(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-start p-24",children:(0,n.jsxs)("div",{className:"flex-col  w-full max-w-5xl items-center lg:flex",children:[(0,n.jsx)("h1",{className:"text-neutral-200 my-5 text-xl",children:" Ask A Question "}),(0,n.jsxs)("form",{onSubmit:h(e=>{console.log(e),fetch("".concat("/query","?question=").concat(e.question,"&context=").concat(e.context),{method:"GET",mode:"no-cors",cache:"no-cache"}).then(e=>e.text()).then(e=>{t(e)})}),children:[(0,n.jsxs)("section",{className:"flex flex-col justify-center align-center gap-4",children:[(0,n.jsx)("textarea",{className:"text-stone-950 p-2 w-80 h-20",defaultValue:"What is the highest value for event_bar in April 2016?",...m("question",{required:!0})}),(0,n.jsx)("textarea",{className:"text-stone-950 p-2 w-80 h-96",defaultValue:"CREATE TABLE IF NOT EXISTS event_bar (event_id INTEGER, event_type STRING, time_fired TIMESTAMP, on BOOLEAN, value INTEGER, device_temp DOUBLE, device_kwh DOUBLE); CREATE TABLE IF NOT EXISTS event_baz (event_id INTEGER, event_type STRING, time_fired TIMESTAMP, on BOOLEAN, value INTEGER, device_temp DOUBLE, device_kwh DOUBLE); CREATE TABLE IF NOT EXISTS event_foo (event_id INTEGER, event_type STRING, time_fired TIMESTAMP, on BOOLEAN, value INTEGER, device_temp DOUBLE, device_kwh DOUBLE);",...m("context",{required:!0})}),E.question&&(0,n.jsx)("span",{children:"This field is required"}),E.context&&(0,n.jsx)("span",{children:"This field is required"})]}),(0,n.jsx)("section",{className:"flex justify-center",children:(0,n.jsx)("input",{className:"bg-slate-600 px-3 py-2 my-4 rounded-md cursor-pointer",type:"submit"})})]}),(0,n.jsx)("h3",{className:"mt-20 mb-2 text-neutral-100 text-2xl flex justify-center ",children:" Generated SQL Query"}),(0,n.jsxs)("div",{className:"bg-stone-900 rounded-md p-6  border border-slate-600 shadow-lg shadow-indigo-500/40 my-5 min-w-96 hover:z-50 ",children:[(0,n.jsxs)("p",{className:"text-blue-300 my-6 text-xl font-semibold leading-8",children:[" ",e," "]}),(0,n.jsx)("button",{onClick:u,children:" RUN"})]}),c.length>0?(0,n.jsx)(r,{queryResults:c}):(0,n.jsx)(n.Fragment,{})]})})]})}}},function(e){e.O(0,[712,279,971,23,744],function(){return e(e.s=3951)}),_N_E=e.O()}]);